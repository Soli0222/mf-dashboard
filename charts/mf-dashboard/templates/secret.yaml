{{- if not .Values.credentials.existingSecret }}
apiVersion: v1
kind: Secret
metadata:
  name: {{ include "mf-dashboard.fullname" . }}-credentials
  labels:
    {{- include "mf-dashboard.labels" . | nindent 4 }}
type: Opaque
stringData:
  MF_USERNAME: {{ .Values.credentials.mfUsername | quote }}
  MF_PASSWORD: {{ .Values.credentials.mfPassword | quote }}
  MF_TOTP_SECRET: {{ .Values.credentials.mfTotpSecret | quote }}
  {{- if .Values.credentials.revalidationToken }}
  REVALIDATION_TOKEN: {{ .Values.credentials.revalidationToken | quote }}
  {{- end }}
  {{- if .Values.slack.enabled }}
  SLACK_BOT_TOKEN: {{ .Values.slack.botToken | quote }}
  SLACK_CHANNEL_ID: {{ .Values.slack.channelId | quote }}
  {{- end }}
{{- end }}
---
{{- if not .Values.database.existingSecret.name }}
apiVersion: v1
kind: Secret
metadata:
  name: {{ include "mf-dashboard.fullname" . }}-database
  labels:
    {{- include "mf-dashboard.labels" . | nindent 4 }}
type: Opaque
stringData:
  POSTGRES_PASSWORD: {{ .Values.database.password | quote }}
{{- end }}
