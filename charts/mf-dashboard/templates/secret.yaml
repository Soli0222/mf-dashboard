{{- if not .Values.credentials.existingSecret }}
apiVersion: v1
kind: Secret
metadata:
  name: {{ include "mf-dashboard.fullname" . }}-credentials
  labels:
    {{- include "mf-dashboard.labels" . | nindent 4 }}
type: Opaque
stringData:
  MF_USERNAME: {{ .Values.credentials.mfUsername | quote }}
  MF_PASSWORD: {{ .Values.credentials.mfPassword | quote }}
  MF_TOTP_SECRET: {{ .Values.credentials.mfTotpSecret | quote }}
  {{- if .Values.database.host }}
  POSTGRES_HOST: {{ .Values.database.host | quote }}
  POSTGRES_PORT: {{ .Values.database.port | default "5432" | quote }}
  POSTGRES_USER: {{ .Values.database.user | quote }}
  POSTGRES_PASSWORD: {{ .Values.database.password | quote }}
  POSTGRES_DB: {{ .Values.database.name | quote }}
  {{- end }}
  {{- if .Values.credentials.revalidationToken }}
  REVALIDATION_TOKEN: {{ .Values.credentials.revalidationToken | quote }}
  {{- end }}
  {{- if .Values.slack.enabled }}
  SLACK_BOT_TOKEN: {{ .Values.slack.botToken | quote }}
  SLACK_CHANNEL_ID: {{ .Values.slack.channelId | quote }}
  {{- end }}
{{- end }}
