# 共通設定
nameOverride: ""
fullnameOverride: ""

# イメージ設定
crawler:
  image:
    repository: ghcr.io/soli0222/mf-dashboard-crawler
    tag: ""
    pullPolicy: Always
  resources:
    requests:
      memory: "512Mi"
      cpu: "250m"
    limits:
      memory: "2Gi"
      cpu: "1000m"
  timeoutMs: 1200000 # 20分
  # helm install 時に post-install hook Job としてクローラーを実行するかどうか
  initOnInstall: false

web:
  image:
    repository: ghcr.io/soli0222/mf-dashboard-web
    tag: ""
    pullPolicy: Always
  replicaCount: 1
  resources:
    requests:
      memory: "128Mi"
      cpu: "100m"
    limits:
      memory: "512Mi"
      cpu: "500m"

# CronJob 設定
cronjob:
  schedules:
    - "30 10 * * *" # JST 10:30
    - "30 18 * * *" # JST 18:30
  concurrencyPolicy: Forbid
  successfulJobsHistoryLimit: 3
  failedJobsHistoryLimit: 3
  backoffLimit: 2

# データベース設定
database:
  # 接続情報
  host: "mf-cluster-rw"
  port: "5432"
  user: "mf"
  password: ""
  name: "mf-dashboard"
  # 既存の Secret からパスワードを取得する場合
  existingSecret:
    name: "mf-cluster-app"        # Secret 名（空の場合は自動生成 Secret を使用）
    passwordKey: "password"  # Secret 内のパスワードのキー名

# 認証情報
credentials:
  existingSecret: "mf-dashboard-credentials"
  mfUsername: ""
  mfPassword: ""
  mfTotpSecret: ""
  revalidationToken: ""

# Slack 通知（オプション）
slack:
  enabled: false
  botToken: ""
  channelId: ""

# Ingress 設定
ingress:
  enabled: true
  className: traefik
  annotations:
    cert-manager.io/cluster-issuer: letsencrypt
  hosts:
    - host: mf-dashboard.str08.net
      paths:
        - path: /
          pathType: Prefix
  tls:
    - hosts:
        - mf-dashboard.str08.net
      secretName: mf-dashboard.str08.net-dns01

# Service 設定
service:
  type: ClusterIP
  port: 80
